#!/usr/bin/env node
'use strict';

/* eslint no-unused-vars: off */

/**
 * Module dependencies.
 */

var cli = require('../lib/cli/cli');
var Mocha = require('../');
var mocha = new Mocha();

var program = cli.makeCommand();

// actions

cli.addActions(program);

// parse args (since we override parseOptions it will handle --opts correctly)

program.parse(process.argv);

var opts = program.opts();

// set options in mocha
cli.setMochaOptions(
  mocha,
  opts
);

var files = cli.resolveFiles(program.args, opts);

try {
  cli.run(mocha, program, files);
} catch (e) {
  console.error(e.message);
  process.exit(1);
}
