#!/usr/bin/env node
'use strict';

/* eslint no-unused-vars: off */

/**
 * Module dependencies.
 */

var Cli = require('../lib/cli/cli');
var Mocha = require('../');
var mocha = new Mocha();

var cli = Cli.makeCommand();
var program = cli.program;
var requires = cli.requires;

// actions

Cli.addActions(program);

// parse args (since we override parse it will handle --opts correctly)

program.parse(process.argv);

// set options in mocha
Cli.setMochaOptions(
  mocha,
  program.opts(),
  requires
);

// requires

requires.forEach(function (mod) {
  require(mod);
});

var files = Cli.resolveFiles(program.args, program.opts());

Cli.run(mocha, program, files);
