#!/usr/bin/env node
'use strict';

/* eslint no-unused-vars: off */

/**
 * Module dependencies.
 */

var cli = require('../lib/cli/cli');
var Mocha = require('../');
var mocha = new Mocha();

var program = cli.makeCommand();

// actions

cli.addActions(program);

// parse args (since we override parse it will handle --opts correctly)

program.parse(process.argv);

// set options in mocha
cli.setMochaOptions(
  mocha,
  program.opts()
);

var files = cli.resolveFiles(program.args, program.opts());

if (!files.length) {
  console.error('No test files found');
  process.exit(1);
}

cli.run(mocha, program, files);
